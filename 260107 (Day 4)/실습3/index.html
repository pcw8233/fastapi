<!doctype html>
<html>
    <head>
        <title>FastAPI Ïã§ÏãúÍ∞Ñ Ïà´Ïûê Í≤åÏûÑ</title>
        <style>
            body {
                font-family: sans-serif;
                display: flex;
                flex-direction: column;
                align-items: center;
                background: #f0f2f5;
            }
            #game-container {
                background: white;
                padding: 2rem;
                border-radius: 12px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                margin-top: 50px;
                text-align: center;
            }
            input {
                padding: 10px;
                font-size: 1.2rem;
                width: 80px;
                border: 2px solid #ddd;
                border-radius: 6px;
            }
            button {
                padding: 10px 20px;
                font-size: 1.2rem;
                background: #007bff;
                color: white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
            }
            button:hover {
                background: #0056b3;
            }
            #log {
                margin-top: 20px;
                padding: 10px;
                width: 300px;
                height: 150px;
                overflow-y: auto;
                background: #eee;
                border-radius: 6px;
                font-size: 0.9rem;
            }
            .status {
                color: #28a745;
                font-weight: bold;
                margin-bottom: 10px;
            }
        </style>
    </head>
    <body>
        <div id="game-container">
            <h2>üî¢ Ïã§ÏãúÍ∞Ñ Up-Down Í≤åÏûÑ</h2>
            <div id="status" class="status">ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ï§ë...</div>
            <input type="number" id="guessInput" placeholder="Ïà´Ïûê" />
            <button onclick="sendGuess()">Ï†ÑÏÜ°</button>
            <div id="log"></div>
        </div>

        <script>
            // WebSocket Ïó∞Í≤∞ ÏÉùÏÑ±
            const ws = new WebSocket("ws://127.0.0.1:8000/ws/game");
            const logDiv = document.getElementById("log");
            const statusDiv = document.getElementById("status");

            ws.onopen = () => (statusDiv.innerText = "üü¢ ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÏôÑÎ£å!");
            ws.onclose = () => (statusDiv.innerText = "üî¥ Ïó∞Í≤∞ Ï¢ÖÎ£å");

            // ÏÑúÎ≤ÑÎ°úÎ∂ÄÌÑ∞ Î©îÏãúÏßÄ ÏàòÏã† Ïãú Ï≤òÎ¶¨
            ws.onmessage = (event) => {
                const message = document.createElement("div");
                message.innerText = event.data;
                logDiv.prepend(message); // ÏµúÏã† Î©îÏãúÏßÄÎ•º ÏúÑÎ°ú
            };

            function sendGuess() {
                const input = document.getElementById("guessInput");
                if (input.value) {
                    ws.send(input.value); // ÏÑúÎ≤ÑÎ°ú Îç∞Ïù¥ÌÑ∞ Ï†ÑÏÜ°
                    input.value = "";
                    input.focus();
                }
            }

            // ÏóîÌÑ∞ÌÇ§ ÏßÄÏõê
            document
                .getElementById("guessInput")
                .addEventListener("keypress", (e) => {
                    if (e.key === "Enter") sendGuess();
                });
        </script>
    </body>
</html>
